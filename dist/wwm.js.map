{"version":3,"file":"wwm.js","sources":["../src/utils/Wallpaper.js","../src/core/events/WWMEvent.js","../src/core/events/EventHandler.js","../node_modules/uuid/dist/esm-browser/rng.js","../node_modules/uuid/dist/esm-browser/bytesToUuid.js","../node_modules/uuid/dist/esm-browser/v4.js","../src/core/events/types/ProgramEvent.js","../src/core/Program.js","../src/core/events/types/WallpaperEvent.js","../src/core/events/types/ScreenEvent.js","../src/core/events/types/WindowEvent.js","../src/core/Window.js","../src/programs/WWMWallpaper.js","../src/index.js","../src/core/WWM.js","../src/core/events/EventEmitter.js","../src/core/events/EventListener.js"],"sourcesContent":["\r\n/**\r\n * This class is used to manage and validate Wallpaper for wwm\r\n */\r\nexport default class Wallpaper {\r\n\r\n\t/**\r\n\t * @param {string} type \r\n\t * @param {string} value \r\n\t */\r\n\tconstructor(type, value) {\r\n\t\tthis.type = type;\r\n\t\tthis.value = value;\r\n\t}\r\n\r\n\t/**\r\n\t * Validate a Wallpaper object\r\n\t * @param {Wallpaper} wp Wallpaper object to validate\r\n\t * @returns {Boolean}\r\n\t */\r\n\tstatic validate(wp) {\r\n\t\tif (Wallpaper.supported.indexOf(wp.type) > -1) {\r\n\t\t\tif (wp.type === \"image\") {\r\n\t\t\t\twp.value = `url(${wp.value})`;\r\n\t\t\t}\r\n\t\t\treturn true; \r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * List of supported wallpaper types\r\n\t */\r\n\tstatic supported = [\r\n\t\t\"image\",\r\n\t\t\"color\",\r\n\t];\r\n}","\r\n/**\r\n * Default WWM Event type\r\n */\r\nexport default class WWMEvent {\r\n\r\n\t/**\r\n\t * @param {string} name \r\n\t */\r\n\tconstructor(name) {\r\n\t\tthis.name = name;\r\n\t}\r\n}","import WWMEvent from './WWMEvent';\r\n\r\n/**\r\n * The EventHandler is a combination of an EventEmitter and an EventListener, it can emit and receive events.\r\n */\r\nexport default class EventHandler {\r\n\t\r\n\t/**\r\n\t * @param {EventListener[]|EventHandler[]} listeners \r\n\t */\r\n\tconstructor(listeners) {\r\n\t\tthis.listeners = listeners || [];\r\n\t\tthis.eventsCallbacks = {};\r\n\t}\r\n\r\n\t/**\r\n\t * Emit an event to listeners\r\n\t * @param {WWMEvent} event \r\n\t */\r\n\temit(event) {\r\n\t\tfor(let i = 0, len = this.listeners.length; i < len; ++i) {\r\n\t\t\tthis.listeners[i].trigger(event);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Register a callback to an event\r\n\t * @param {string} name \r\n\t * @param {Function} callback \r\n\t */\r\n\ton(name, callback) {\r\n\t\tif (!this.eventsCallbacks[name]) this.eventsCallbacks[name] = {};\r\n\t\tthis.eventsCallbacks[name].on = callback;\r\n\t}\r\n\r\n\t/**\r\n\t * Register a callback that is triggered only the first time a specific event is received\r\n\t * @param {string} name \r\n\t * @param {Function} callback \r\n\t */\r\n\tonce(name, callback) {\r\n\t\tif (!this.eventsCallbacks[name]) this.eventsCallbacks[name] = {};\r\n\t\tthis.eventsCallbacks[name].once = callback;\r\n\t}\r\n\r\n\t/**\r\n\t * Triggers callbacks for a specific event\r\n\t * @param {WWMEvent} event \r\n\t */\r\n\ttrigger(event) {\r\n\t\tif (this.eventsCallbacks[event.name] && this.eventsCallbacks[event.name].once) {\r\n\t\t\tthis.eventsCallbacks[event.name].once(event);\r\n\t\t\tthis.eventsCallbacks[event.name].once = null;\r\n\t\t}\r\n\t\tif (this.eventsCallbacks[event.name] && this.eventsCallbacks[event.name].on)\r\n\t\t\tthis.eventsCallbacks[event.name].on(event);\r\n\t}\r\n\r\n\t/**\r\n\t * Subscribe a listener to the emitter\r\n\t * @param {EventListener|EventHandler} listener \r\n\t */\r\n\tsubscribe(listener) {\r\n\t\tif (this.listeners.indexOf(listener) <= -1) {\r\n\t\t\tthis.listeners.push(listener);\r\n\t\t}\r\n\t}\r\n}","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n// find the complete implementation of crypto (msCrypto) on IE11.\nvar getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  if (!getRandomValues) {\n    throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n  }\n\n  return getRandomValues(rnds8);\n}","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex; // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n\n  return (bth[buf[i + 0]] + bth[buf[i + 1]] + bth[buf[i + 2]] + bth[buf[i + 3]] + '-' + bth[buf[i + 4]] + bth[buf[i + 5]] + '-' + bth[buf[i + 6]] + bth[buf[i + 7]] + '-' + bth[buf[i + 8]] + bth[buf[i + 9]] + '-' + bth[buf[i + 10]] + bth[buf[i + 11]] + bth[buf[i + 12]] + bth[buf[i + 13]] + bth[buf[i + 14]] + bth[buf[i + 15]]).toLowerCase();\n}\n\nexport default bytesToUuid;","import rng from './rng.js';\nimport bytesToUuid from './bytesToUuid.js';\n\nfunction v4(options, buf, offset) {\n  if (typeof options === 'string') {\n    buf = options === 'binary' ? new Uint8Array(16) : null;\n    options = null;\n  }\n\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    var start = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[start + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return bytesToUuid(rnds);\n}\n\nexport default v4;","import Program from '../../Program';\r\nimport WWMEvent from '../WWMEvent';\r\n\r\n/**\r\n * Program Event Type\r\n */\r\nexport default class ProgramEvent extends WWMEvent {\r\n\r\n\t/**\r\n\t * @param {string} name \r\n\t * @param {Program} program \r\n\t */\r\n\tconstructor(name, program) {\r\n\t\tsuper(name);\r\n\t\tthis.program = program;\r\n\t}\r\n}","import { v4 as uuidv4 } from 'uuid';\r\nimport EventHandler from './events/EventHandler';\r\nimport WWM from './WWM';\r\nimport ProgramEvent from './events/types/ProgramEvent';\r\n\r\n/**\r\n * Program class\r\n */\r\nexport default class Program extends EventHandler {\r\n\r\n\t/**\r\n\t * @param {WWM} parent \r\n\t */\r\n\tconstructor(parent) {\r\n\t\t// Setup event emitting to self and WWM instance\r\n\t\tsuper();\r\n\t\tthis.subscribe(this);\r\n\t\tthis.subscribe(parent);\r\n\r\n\t\tthis.id = uuidv4();\r\n\t\tthis.name = \"Program\";\r\n\t\tthis.parent = parent;\r\n\t\tthis.args = [];\r\n\r\n\t\tthis.events();\r\n\t}\r\n\r\n\t/**\r\n\t * Execute the program on the parent WWM instance\r\n\t * @param  {...any} args Argument list that is passed to the program\r\n\t */\r\n\texec(...args) {\r\n\t\tthis.args = args;\r\n\t\tthis.emit(new ProgramEvent(\"ProgramExec\", this));\r\n\t}\r\n\r\n\t/**\r\n\t * Utility function to overide in childs, hosts events receiving callback definitions\r\n\t */\r\n\tevents() {}\r\n\r\n\t/**\r\n\t * Main function of the program, is called on program execution\r\n\t */\r\n\tmain() {\r\n\t\tthis.end();\r\n\t}\r\n\r\n\t/**\r\n\t * Emits a \"ProgramEnd\" event to the WWM instance to kill the program, call this function to end a program exectution\r\n\t */\r\n\tend() {\r\n\t\tthis.emit(new ProgramEvent(\"ProgramEnd\", this));\r\n\t}\r\n}","import Wallpaper from '../../../utils/Wallpaper';\r\nimport WWMEvent from '../WWMEvent';\r\n\r\n/**\r\n * Wallpaper Event Type\r\n */\r\nexport default class WallpaperEvent extends WWMEvent {\r\n\r\n\t/**\r\n\t * @param {string} name \r\n\t * @param {Wallpaper} wallpaper \r\n\t */\r\n\tconstructor(name, wallpaper) {\r\n\t\tsuper(name);\r\n\t\tthis.wallpaper = wallpaper;\r\n\t}\r\n}","import WWMEvent from '../WWMEvent';\r\n\r\n/**\r\n * Screen Event\r\n */\r\nexport default class WallpaperEvent extends WWMEvent {\r\n\r\n\t/**\r\n\t * @param {string} name\r\n\t * @param {HTMLElement} screen HTMLElement that represents the screen of a WWM instance (WWM.container in most cases)\r\n\t */\r\n\tconstructor(name, screen) {\r\n\t\tsuper(name);\r\n\r\n\t\tconst screenStyle = getComputedStyle(screen);\r\n\t\tthis.screen = {\r\n\t\t\telement: screen,\r\n\t\t\twidth: screenStyle.width,\r\n\t\t\theight: screenStyle.height,\r\n\t\t};\r\n\t}\r\n}","import WWMEvent from '../WWMEvent';\r\nimport Window from '../../Window';\r\n\r\n/**\r\n * Screen Event\r\n */\r\nexport default class WindowEvent extends WWMEvent {\r\n\r\n\t/**\r\n\t * @param {string} name\r\n\t * @param {Window} window Window that is emitting the event\r\n\t */\r\n\tconstructor(name, window) {\r\n\t\tsuper(name);\r\n\t\tthis.window = window\r\n\t}\r\n}","import EventHandler from './events/EventHandler';\r\nimport Program from './Program';\r\nimport WWM from './WWM';\r\n\r\n// Event types:\r\nimport WindowEvent from './events/types/WindowEvent';\r\n\r\n/**\r\n * Window class\r\n */\r\nexport default class Window extends EventHandler {\r\n\r\n\t/**\r\n\t * @param {Program} program \r\n\t * @param {object} options \r\n\t */\r\n\tconstructor(program, options) {\r\n\t\tsuper();\r\n\t\tthis.subscribe(this);\r\n\r\n\t\tthis.program = program;\r\n\r\n\t\tconst defaults = {\r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\twidth: 100,\r\n\t\t\theight: 100,\r\n\t\t\ttitlebar: false,\r\n\t\t\tvisible: true,\r\n\t\t};\r\n\t\toptions = Object.assign({}, defaults, options);\r\n\r\n\t\tthis.x = options.x;\r\n\t\tthis.y = options.y;\r\n\t\tthis.width = options.width;\r\n\t\tthis.height = options.height;\r\n\t\tthis.visible = options.visible;\r\n\r\n\t\tthis.element = document.createElement(\"div\");\r\n\t\tthis.program.parent.container.appendChild(this.element);\r\n\r\n\t\t// Setup default style of the window\r\n\t\tthis.__setupStyle();\r\n\r\n\t\t// Setup core and custom events of the window\r\n\t\tthis.__setupEvents();\r\n\t\tthis.events();\r\n\t}\r\n\r\n\t/**\r\n\t * Intern function of the windows class. Called by the constructor to setup the default style of a window\r\n\t */\r\n\t__setupStyle() {\r\n\t\tthis.element.setAttribute(\"style\", `\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: ${this.y}px;\r\n\t\t\tleft: ${this.x}px;\r\n\t\t\twidth: ${this.width};\r\n\t\t\theight: ${this.height};\r\n\t\t\tvisible: ${this.visible};\r\n\t\t`);\r\n\t}\r\n\r\n\t/**\r\n\t * Setup various core events on a Window instance\r\n\t */\r\n\t__setupEvents() {}\r\n\r\n\t/**\r\n\t * Utility function to overide in childs, hosts events receiving callback definitions\r\n\t */\r\n\tevents() {}\r\n\r\n\t/**\r\n\t * Define the innerHTML of the window HTMLElement, a template string can be given for templating\r\n\t * @param {string} template\r\n\t */\r\n\trender(template) {\r\n\t\tthis.element.innerHTML = template;\r\n\t}\r\n\r\n\t/**\r\n\t * Resize the window and send a \"WindowResize\" event\r\n\t * @param {*} width \r\n\t * @param {*} height \r\n\t */\r\n\tresize(width, height) {\r\n\t\tthis.width = width;\r\n\t\tthis.height = height;\r\n\t\tthis.element.style.width = this.width;\r\n\t\tthis.element.style.height = this.height;\r\n\t\tthis.emit(new WindowEvent(\"WindowResize\", this));\r\n\t}\r\n}","import Program from '../core/Program';\r\nimport Window from '../core/Window';\r\nimport WWM from '../core/WWM';\r\nimport Wallpaper from '../utils/Wallpaper';\r\n\r\n// Event types:\r\nimport WallpaperEvent from '../core/events/types/WallpaperEvent';\r\n\r\nexport default class WWMWallpaper extends Program {\r\n\r\n\t/**\r\n\t * @param {WWM} parent \r\n\t */\r\n\tconstructor(parent) {\r\n\t\tsuper(parent);\r\n\t\tthis.name = \"WWMWallpaper\";\r\n\t}\r\n\r\n\tmain() {\r\n\r\n\t\tlet wpType = this.args[0];\r\n\t\tlet wpValue = this.args[1];\r\n\r\n\t\tthis.parent.subscribe(this);\r\n\t\tconst parentStyle = getComputedStyle(this.parent.container);\r\n\r\n\t\tthis.mainWindow = new Window(this, {\r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\twidth: parentStyle.width,\r\n\t\t\theight: parentStyle.height,\r\n\t\t})\r\n\r\n\t\tthis.mainWindow.element.style.backgroundSize = \"cover\";\r\n\t\tthis.mainWindow.element.style.backgroundPosition = \"center center\";\r\n\r\n\t\tthis.setWallpaper(wpType, wpValue);\r\n\t}\r\n\r\n\tevents() {\r\n\t\tthis.on('ScreenResize', e => {\r\n\t\t\tthis.mainWindow.resize(e.screen.width, e.screen.height);\r\n\t\t});\r\n\t\t\r\n\t\tthis.on('WallpaperChange', e => {\r\n\t\t\tswitch (e.wallpaper.type) {\r\n\t\t\t\tcase \"image\":\r\n\t\t\t\t\tthis.mainWindow.element.style.backgroundImage = e.wallpaper.value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\t\tcase \"color\":\r\n\t\t\t\t\tthis.mainWindow.element.style.backgroundColor = e.wallpaper.value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * Set a wallpaper to the WWM instance\r\n\t * @param {string} type \r\n\t * @param {string} value \r\n\t */\r\n\tsetWallpaper(type, value) {\r\n\t\tlet wp = new Wallpaper(type, value);\r\n\t\tif (Wallpaper.validate(wp)) {\r\n\t\t\tthis.emit(new WallpaperEvent('WallpaperChange', wp));\r\n\t\t}\r\n\t}\r\n}","\n// Core imports:\nimport WWM from './core/WWM';\nimport Program from './core/Program';\nimport Window from './core/Window';\n\nimport EventEmitter from './core/events/EventEmitter';\nimport EventListener from './core/events/EventListener';\nimport EventHandler from './core/events/EventHandler';\n\n// Event types:\nimport WWMEvent from './core/events/WWMEvent';\nimport WallpaperEvent from './core/events/types/WallpaperEvent';\nimport ProgramEvent from './core/events/types/ProgramEvent';\n\n// Utils imports:\nimport Wallpaper from './utils/Wallpaper';\n\nexport default {\n\t// Core:\n\tWWM,\n\tProgram,\n\tWindow,\n\n\tEventEmitter,\n\tEventListener,\n\tEventHandler,\n\n\tWWMEvent,\n\tWallpaperEvent,\n\tProgramEvent,\n\n\t// Utils:\n\tWallpaper,\n}","import Wallpaper from '../utils/Wallpaper';\r\nimport EventHandler from '../core/events/EventHandler';\r\nimport Program from './Program';\r\n\r\n// Event types:\r\nimport WallpaperEvent from './events/types/WallpaperEvent';\r\nimport ProgramEvent from './events/types/ProgramEvent';\r\nimport ScreenEvent from './events/types/ScreenEvent';\r\n\r\n// Programs:\r\nimport WWMWallpaper from '../programs/WWMWallpaper';\r\n\r\n/**\r\n * Main system class for window managing\r\n */\r\nexport default class WWM extends EventHandler {\r\n\r\n\t/**\r\n\t * @param {Object} options \r\n\t */\r\n\tconstructor(options) {\r\n\t\t// Setting up events listening/emitting:\r\n\t\tsuper();\r\n\t\tthis.subscribe(this);\r\n\r\n\t\t// Setting up options with defaults:\r\n\t\tconst defaults = {\r\n\t\t\ttiling: \"floating\",\r\n\t\t\tcontainer: null,\r\n\t\t};\r\n\t\t/** @type {Object} */\r\n\t\tthis.options = Object.assign({}, defaults, options);\r\n\r\n\t\t/** @type {HTMLElement} */\r\n\t\tthis.container = (this.options.container) ? document.querySelector(this.options.container) : document.body;\r\n\t\tthis.container.style.position = \"relative\";\r\n\t\tthis.container.style.overflow = \"hidden\";\r\n\r\n\t\tthis.programs = [];\r\n\r\n\t\tthis.__setupEvents();\r\n\r\n\t\tthis.__setupPrograms();\r\n\t}\r\n\r\n\t/**\r\n\t * Setup various core events on a WWM instance\r\n\t */\r\n\t__setupEvents() {\r\n\t\t// Core Events:\r\n\t\tthis.on(\"ProgramExec\", e => {\r\n\t\t\tthis.programs.push(e.program);\r\n\t\t\te.program.main();\r\n\t\t});\r\n\r\n\t\t// DOM Window Events:\r\n\t\twindow.addEventListener('resize', ()=> {\r\n\t\t\tthis.emit(new ScreenEvent(\"ScreenResize\", this.container));\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Execute core programs of the WWM instance\r\n\t */\r\n\t__setupPrograms() {\r\n\t\tthis.exec(new WWMWallpaper(this), \"color\", \"#000000\");\r\n\t}\r\n\r\n\t/**\r\n\t * Execute a program given in parameter. Use this function to execute a program in your WWM instance.\r\n\t * @param {Program} program \r\n\t */\r\n\texec(program, ...args) {\r\n\t\tprogram.parent = this;\r\n\t\tprogram.subscribe(this);\r\n\t\tprogram.args = args;\r\n\t\tthis.emit(new ProgramEvent('ProgramExec', program));\r\n\t}\r\n\r\n\t/**\r\n\t * Set a wallpaper to the WWM instance\r\n\t * @param {string} type \r\n\t * @param {string} value \r\n\t */\r\n\tsetWallpaper(type, value) {\r\n\t\tlet wp = new Wallpaper(type, value);\r\n\t\tif (Wallpaper.validate(wp)) {\r\n\t\t\tthis.emit(new WallpaperEvent('WallpaperChange', wp));\r\n\t\t}\r\n\t}\r\n}","import WWMEvent from '../events/WWMEvent';\r\n\r\n/**\r\n * The EventEmitter can emit events to subscribed EventListeners.\r\n */\r\nexport default class EventEmitter {\r\n\r\n\t/**\r\n\t * @param {EventListener[]|EventHandler[]} listeners \r\n\t */\r\n\tconstructor(listeners) {\r\n\t\tthis.listeners = listeners || [];\r\n\t}\r\n\r\n\t/**\r\n\t * Emit an event to listeners\r\n\t * @param {WWMEvent} event \r\n\t */\r\n\temit(event) {\r\n\t\tfor(let i = 0, len = this.listeners.length; i < len; ++i) {\r\n\t\t\tthis.listeners[i].trigger(event);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Subscribe a listener to the emitter\r\n\t * @param {EventListener|EventHandler} listener \r\n\t */\r\n\tsubscribe(listener) {\r\n\t\tif (this.listeners.indexOf(listener) <= -1) {\r\n\t\t\tthis.listeners.push(listener);\r\n\t\t}\r\n\t}\r\n}","import WWMEvent from '../events/WWMEvent';\r\n\r\n/**\r\n * The EventListener can receive events emitted by EventEmitters.\r\n */\r\nexport default class EventListener {\r\n\t\r\n\tconstructor() {\r\n\t\tthis.eventsCallbacks = {};\r\n\t}\r\n\r\n\t/**\r\n\t * Register a callback to an event\r\n\t * @param {string} name \r\n\t * @param {Function} callback \r\n\t */\r\n\ton(name, callback) {\r\n\t\tif (!this.eventsCallbacks[name]) this.eventsCallbacks[name] = {};\r\n\t\tthis.eventsCallbacks[name].on = callback;\r\n\t}\r\n\r\n\t/**\r\n\t * Register a callback that is triggered only the first time a specific event is received\r\n\t * @param {string} name \r\n\t * @param {Function} callback \r\n\t */\r\n\tonce(name, callback) {\r\n\t\tif (!this.eventsCallbacks[name]) this.eventsCallbacks[name] = {};\r\n\t\tthis.eventsCallbacks[name].once = callback;\r\n\t}\r\n\r\n\t/**\r\n\t * Triggers callbacks for a specific event\r\n\t * @param {WWMEvent} event \r\n\t */\r\n\ttrigger(event) {\r\n\t\tif (this.eventsCallbacks[event.name] && this.eventsCallbacks[event.name].once) {\r\n\t\t\tthis.eventsCallbacks[event.name].once(event);\r\n\t\t\tthis.eventsCallbacks[event.name].once = null;\r\n\t\t}\r\n\t\tif (this.eventsCallbacks[event.name] && this.eventsCallbacks[event.name].on)\r\n\t\t\tthis.eventsCallbacks[event.name].on(event);\r\n\t}\r\n}"],"names":["Wallpaper","[object Object]","type","value","this","wp","supported","indexOf","WWMEvent","name","EventHandler","listeners","eventsCallbacks","event","i","len","length","trigger","callback","on","once","listener","push","getRandomValues","crypto","bind","msCrypto","rnds8","Uint8Array","rng","Error","byteToHex","toString","substr","v4","options","buf","offset","rnds","random","start","bth","toLowerCase","bytesToUuid","ProgramEvent","program","super","Program","parent","subscribe","id","uuidv4","args","events","emit","end","WallpaperEvent","wallpaper","screen","screenStyle","getComputedStyle","element","width","height","WindowEvent","window","Window","Object","assign","x","y","titlebar","visible","document","createElement","container","appendChild","__setupStyle","__setupEvents","setAttribute","template","innerHTML","style","WWMWallpaper","wpType","wpValue","parentStyle","mainWindow","backgroundSize","backgroundPosition","setWallpaper","e","resize","backgroundImage","backgroundColor","validate","WWM","tiling","querySelector","body","position","overflow","programs","__setupPrograms","main","addEventListener","ScreenEvent","exec","EventEmitter","EventListener"],"mappings":"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"}