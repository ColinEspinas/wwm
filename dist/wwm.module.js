import"shortid";class s{constructor(s,e){this.type=s,this.value=e}static validate(e){return s.supported.indexOf(e.type)>-1}static supported=["image","color"]}class e{constructor(s){this.name=s}}class t{constructor(s){this.listeners=s||[],this.eventsCallbacks={}}emit(s){for(let e=0,t=this.listeners.length;e<t;++e)this.listeners[e].trigger(s)}on(s,e){this.eventsCallbacks[s].on=e}once(s,e){this.eventsCallbacks[s].once=e}trigger(s){console.log(this.eventsCallbacks),this.eventsCallbacks[s.name]&&this.eventsCallbacks[s.name].once&&(this.eventsCallbacks[s.name].once(s),this.eventsCallbacks[s.name].once=null),this.eventsCallbacks[s.name]&&this.eventsCallbacks[s.name].on&&this.eventsCallbacks[s.name].on(s)}subscribe(s){this.listeners.push(s)}}class n extends e{constructor(s,e){super(s),this.program=e}}class a extends e{constructor(s,e){super(s),this.wallpaper=e}}var l={WWM:class extends t{constructor(s){super([this]);this.options=Object.assign({},{tiling:"floating",container:null},s),this.container=this.options.container?document.querySelector(this.options.container):document.body,this.programs=[],__setupEvents()}__setupEvents(){this.on("ProgramExec",s=>{this.programs.push(program),program.main()}),this.on("wallpaperChange",s=>{this.wallpaper=s.wallpaper})}exec(s){s.parent=this,s.subscribe(this),this.emit(new n("ProgramExec",s))}setWallpaper(e,t){let n=new s(e,t);s.validate(n)&&this.emit(new a("wallpaperChange",n))}},EventEmitter:class{constructor(s){this.listeners=s||[]}emit(s){for(let e=0,t=this.listeners.length;e<t;++e)this.listeners[e].trigger(s)}subscribe(s){this.listeners.push(s)}},EventListener:class{constructor(){this.eventsCallbacks={}}on(s,e){this.eventsCallbacks[s].on=e}once(s,e){this.eventsCallbacks[s].once=e}trigger(s){console.log(this.eventsCallbacks),this.eventsCallbacks[s.name]&&this.eventsCallbacks[s.name].once&&(this.eventsCallbacks[s.name].once(s),this.eventsCallbacks[s.name].once=null),this.eventsCallbacks[s.name]&&this.eventsCallbacks[s.name].on&&this.eventsCallbacks[s.name].on(s)}},EventHandler:t,WWMEvent:e,WallpaperEvent:a,Wallpaper:s};export default l;
